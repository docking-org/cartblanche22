{% extends 'base.html' %}
{% block styles %}
    {{ super() }}
    <style>
    .input-sm{
        padding: 0 !important;
    }
    </style>
{% endblock %}
{% block scripts %}
    {{ super() }}
    <script>
        function toggleVendor(btn) {
            let price = btn.getAttribute('data-price')
            let identifier = btn.getAttribute('data-id')
            let smile = btn.getAttribute('data-smile')
            let db = btn.getAttribute('data-db')
            let supplier_code = btn.getAttribute('data-catalog')
            let cat_name = btn.getAttribute('data-catalog')
            let quantity = btn.getAttribute('data-quantity')
            let unit = btn.getAttribute('data-unit')
            let shipping = btn.getAttribute('data-shipping')
            let purchase = 1
            if (btn.getAttribute('class') == 'btn btn-info') {
                shoppingCart.addVendorToCart(identifier, db, smile, cat_name, supplier_code, price, purchase, quantity, unit, shipping)
                $(btn).html('Remove')
                $(btn).attr('class', 'btn btn-danger')
            } else {
                shoppingCart.removeVendorFromCart(identifier, cat_name, supplier_code, quantity, unit, price)
                $(btn).html('Add To Cart')
                $(btn).attr('class', 'btn btn-info')
            }
            $('#cartCount').html(shoppingCart.countCart())
        }

    </script>
{% endblock %}
{% block app_content %}
    <div class="row">
        <div class="col-sm-9">
            <div class="row">
                <h1>
                    <a href="" title="Permalink to {{ data.zinc_id }}">
                        {{ data.zinc_id }}
                    </a>

                </h1>
                <div class="clearfix">
                    <strong class="pull-left">In:</strong>
                    <ul class="list-inline">
                    </ul>
                </div>
            </div>
            <div class="row">
                <table class="table table-striped table-condensed table-hover table-numeric">
                    <thead>
                    <tr>

                        <th><abbr title="Molecular Weight">Mwt</abbr></th>
                        <th><abbr title="Partition Coefficient">logP</abbr></th>
                        <th>Tranche</th>
                        <th>Heavy Atoms</th>

                        {#                        <th>Download</th>#}
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        {% if data.tranche %}
                            <td>{{ data.tranche.mwt }} || {{data.tranche_details.mwt }}</td>
                            <td>{{ data.tranche.logp }} || {{data.tranche_details.logp }}</td>
                            <td>{{ data.tranche.h_num }}{{ data.tranche.p_num }}</td>
                            <td>{{data.tranche_details.heavyAtoms }}</td>
                        {% else %}
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        {% endif %}
                    </tr>
                    </tbody>
                </table>
                <table class="table table-striped table-condensed table-hover table-numeric">
                    <thead>
                    <tr>
                        <th>Catalogs Name</th>
                        <th>Short Name</th>
                        <th>Sub Id</th>

                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        {% if data.catalogs[0].catalog_name == 'mcule' %}
                            <td>mcule</td>
                        {% elif data.catalogs[0].catalog_name == 'm' %}
                            <td>Enamine_M</td>
                        {% elif data.catalogs[0].catalog_name == 's' %}
                            <td>Enamine_S</td>
                        {% elif data.catalogs[0].catalog_name == 'wuxi' %}
                            <td>wuxi</td>
                        {% else %}
                            <td>{{ data.catalogs[0].catalog_name }}</td>
                        {% endif %}
                        <td>{{ data.catalogs[0].short_name }}</td>
                        <td>{{ data.sub_id }}</td>
                    </tr>
                    </tbody>
                </table>

            </div>
            <div class="row collapse-inputgroups">
                <div class="input-group input-sm">
                    <label for="substance-smiles-field" id="substance-smiles-field-label" class="input-group-addon"
                           title="Click to copy to clipboard">SMILES</label>
                    <input type="text" class="form-control" id="substance-smiles-field" readonly=""
                           value={{ data.smiles }}>
{#                    <span class="input-group-btn">#}
{#                        <button class="btn btn-default" type="button" data-role="trigger-copy" data-target="#substance-smiles-field"#}
{#                            title="Copy SMILES to clipboard">#}
{#                    <span class="glyphicon glyphicon-copy"></span> <span class="sr-only">Copy</span>#}
{#                    </button>#}
      </span>
                </div>

                <div class="input-group input-sm">
                    <label for="scaffold-inchi-field"
                           id="scaffold-inchi-field-label"
                           class="input-group-addon"
                           title="Click to copy to clipboard">InChI</label>
                    <input type="text" class="form-control" id="scaffold-inchi-field" readonly
                           value="{{ data.tranche_details.inchi }}">
{#                    <span class="input-group-btn">#}
{#                        <button class="btn btn-default"#}
{#                                type="button"#}
{#                                data-role="trigger-copy"#}
{#                                data-target="#scaffold-inchi-field"#}
{#                                title="Copy InChI to clipboard">#}
{#                            <span class="glyphicon glyphicon-copy"></span> <span class="sr-only">Copy</span>#}
{#                        </button>#}
{#                      </span>#}
                </div>
                <div class="input-group input-sm">
                    <label for="scaffold-inchikey-field"
                           id="scaffold-inchikey-field-label"
                           class="input-group-addon"
                           title="Click to copy to clipboard">InChI Key</label>
                    <input class="form-control" id="scaffold-inchikey-field"
                           value="{{ data.tranche_details.inchi_key }}" readonly>
{#                    <span class="input-group-btn">#}
{#                        <button class="btn btn-default"#}
{#                                type="button"#}
{#                                data-role="trigger-copy"#}
{#                                data-target="#scaffold-inchikey-field"#}
{#                                title="Copy InChI Key to clipboard">#}
{#                            <span class="glyphicon glyphicon-copy"></span>#}
{#                        <span class="sr-only">Copy</span></button>#}
{#                      </span>#}
                </div>
            </div>

        </div>
        <div class="col-sm-3">
            <div class="thumbnail">
                <img style="width:100%; height: 15vh"
                     src="https://sw.docking.org/depict/svg?w=50&h=30h&smi={{ smile }}&qry=%q&cols=%c&cmap=%m"
                     alt="ZINCgs0000000OA0">

{#                <div class="caption text-center">#}
{#                    <a href="">Draw</a>#}
{#                </div>#}
            </div>

            <table class="table table-striped table-condensed table-hover table-numeric">
                <thead>
                <tr>
                    <th>Supplier Codes</th>
                </tr>
                </thead>
                <tbody>
                {% for supplier in data.supplier_code %}
                    <tr>
                        <td>{{ supplier }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>


    </div>
    <div class="row">
        <table class="table table-striped table-condensed table-hover table-numeric">
            <thead>
            <tr>
                <th>Organization</th>
                <th>Catalog Name</th>
                <th>Pack</th>
                <th>Ships within</th>
                <th>Price</th>
            </tr>
            </thead>
            <tbody>
            {% for p in prices %}
                <tr>
                    <td>{{ p.organization }} </td>
                    <td>{{ p.category_name }}</td>
                    <td> {{ p.quantity }} {{ p.unit }}</td>
                    <td> {{ p.shipping }} </td>
                    <td> {{ p.price }} </td>

                    <td>

                        {#                        <button class="btn btn-info vendorBtn"#}
                        {#                                data-catalog="{{ p.category_name }}"#}
                        {#                                data-price="{{ p.price }}"#}
                        {#                                data-quantity="{{ p.quantity }}"#}
                        {#                                data-unit="{{ p.unit }}"#}
                        {#                                data-shipping="{{ p.shipping }}"#}
                        {#                                data-id="{{ data.zinc_id }}"#}
                        {#                                data-db = "zinc22"#}
                        {#                                data-smile =" {{ data.smiles }}"#}
                        {#                                onclick="toggleVendor(this)">#}
                        {#                            <span class="glyphicon glyphicon-shopping-cart" style="font-size:16px"></span>#}
                        {#                            Add to cart#}
                        {#                        </button>#}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}