{% extends 'base.html' %}
{% block styles %}
    {{ super() }}
    <style>
        {#th, td {#}
        {#    white-space: nowrap;#}
        {#    vertical-align: top;#}
        {#    background-color: white;#}
                        {#width: 50px !important;#}
        {##}
        {##}
        {#.chosen {#}
        {#    background-color: rgb(200, 200, 200);#}
     div {
            max-width:80em;
            max-height: 50em;
            overflow: scroll;
            position: relative;
        }

        table {
            position: relative;
            border-collapse: collapse;
        }

        td,
        th {
            padding: 0.5em;
        }

        thead th {
            position: -webkit-sticky;
            /* for Safari */
            position: sticky;
            top: 0;
            background: grey;
            color: #FFF;
        }

        tfoot th {
            position: -webkit-sticky;
            /* for Safari */
            position: sticky;
            bottom: 0;
            background: grey;
            color: #FFF;
        }

        tfoot th:first-child {
            left: 0;
            z-index: 1;
        }

        tfoot th:last-child {
            right: 0;
            z-index: 1;
        }

        thead th:first-child {
            left: 0;
            z-index: 1;
        }

        thead th:last-child {
            right: 0;
            z-index: 1;
        }

        tbody th {
            position: -webkit-sticky;
            /* for Safari */
            position: sticky;
            left: 0;
            background: #FFF;
            border-right: 1px solid #CCC;

        }

        tbody td:last-child {
            position: -webkit-sticky;
            /* for Safari */
            position: sticky;
            right: 0;
            background: blue;
            border-right: 1px solid #CCC;
        }
    </style>

{% endblock %}
{% block scripts %}
    {{ super() }}
    <script>
     $(document).ready(function (){
         console.log('hi')
       let arr = {{ cell2D | safe }}
         console.log(typeof(arr))
        let log_total = Math.log({{ unfilteredSize }})
         for(let i=0; i < 62; i++){
             for (let j = 0; j < 62; j++){
                 $('#' + i +'-' +j).html(arr[i][j])
                  let color = (Math.floor(255-255 * (log_total-1.1*Math.log(arr[i][j]))/log_total));
                    $('#' + i +'-' +j).css('background-color', '#' + color.toString(16).repeat(3));
                    $('#' + i +'-' +j).css('color', color > 105 ? '#333' : '#ccc');
                    {#$('#' + i +'-' +j).style['opacity'] = cell.enabled ? 1.0 : 0.1;#}
             }
         }
     });
    </script>
{% endblock %}
{% block app_content %}
    <div>
    <table>
        <thead>
        <tr>
            <th></th>
            {% for cell in ticks[0] %}
            <th>{{ axes[0][cell] }}</th>
            {% endfor %}
          <th>Totals, by logp</th>
        </tr>
        </thead>
        <tbody>
        {% for row in ticks[0] %}
        <tr>
            <th>{{ axes[1][row] }}</th>
            {% for col in ticks[0] %}
                <td id ='{{ row }}-{{ col }}'>{{ row, col }}</td>
                {% endfor %}
            <td id="sum-{{ row }}">Sum {{ row }}</td>
        </tr>
        {% endfor %}

        </tbody>
     <tfoot>
                <tr>
                    <th>Totals, by Weight</th>
                 {% for col in ticks[0] %}
            <th id="sum-{{ col }}">sum {{ axes[0][col] }}</th>
            {% endfor %}
                     <th>all sum</th>

                </tr>
            </tfoot>
    </table>
    </div>

{% endblock %}